<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ABROX AI ‚Äî Login</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    /* Fintech Premium Theme */
    --bg1:#02041b;
    --bg2:#03031a;
    --panel-bg: rgba(10,12,28,0.45);
    --glass-edge: rgba(255,255,255,0.08);
    --muted: rgba(255,255,255,0.75);

    --cyan:#00eaff;
    --purple:#c400ff;
    --gold:#ffd36b;
    --fail-red:#ff3b3b;

    --btn-core: #c400ff;
    --btn-bloom: #ff4cff;
    --btn-aura: rgba(80,200,255,0.18);
  }

  html,body{
    height:100%;
    margin:0;
    background:linear-gradient(160deg,var(--bg1),var(--bg2));
    font-family:"Poppins",system-ui;
    color:#fff;
    overflow:hidden;
  }

  #scene { position:fixed; inset:0; z-index:0; }
  canvas { width:100%; height:100%; display:block; }

  main.panel {
    position:absolute;
    left:50%; top:48%; /* slightly above center for comfort */
    transform:translate(-50%,-50%);
    z-index:10;
    width:100%;
    max-width:520px;
    padding:34px;
    border-radius:22px;
    background:var(--panel-bg);
    border:1px solid var(--glass-edge);
    backdrop-filter: blur(14px) saturate(1.25);
    text-align:center;
    box-shadow:0 18px 80px rgba(0,0,0,0.6);
    transition: transform .25s ease, box-shadow .25s ease;
  }

  /* panel shake for fail */
  main.panel.shake {
    animation: panelShake .48s cubic-bezier(.36,.07,.19,.97);
  }
  @keyframes panelShake {
    10%, 90% { transform: translate(-50%, -50%) translateX(-1px); }
    20%, 80% { transform: translate(-50%, -50%) translateX(2px); }
    30%, 50%, 70% { transform: translate(-50%, -50%) translateX(-4px); }
    40%, 60% { transform: translate(-50%, -50%) translateX(4px); }
  }

  .title{
    font-size:30px;
    font-weight:800;
    margin-bottom:8px;
    color:var(--cyan);
    text-shadow:0 0 18px rgba(0,238,255,0.5);
  }

  .sub{
    font-size:13px;
    color:var(--muted);
    margin-bottom:20px;
  }

  .field{
    width:100%;
    padding:14px 16px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.08);
    background:rgba(12,14,26,0.55);
    margin-top:12px;
    color:#dffaff;
    font-size:15px;
    outline:none;
    backdrop-filter:blur(8px);
  }

  .password-wrap{
    position:relative;
    width:100%;
  }

  #togglePassword{
    position:absolute;
    right:14px;
    top:50%;
    transform:translateY(-50%);
    cursor:pointer;
    color:#aaa;
    font-size:15px;
    user-select:none;
  }

  /* STRONGER 3-LAYER NEON BUTTON */
  .btn{
    width:100%;
    margin-top:22px;
    padding:14px;
    border-radius:14px;
    border:none;
    font-weight:800;
    font-size:16px;
    cursor:pointer;
    color:#fff;
    position:relative;
    z-index:2;
    overflow:visible;
    transition: transform .12s ease;
  }

  /* core */
  .btn-core {
    background: linear-gradient(180deg, var(--btn-core), var(--btn-bloom));
    box-shadow:
      0 4px 14px rgba(196,0,255,0.28),       /* core shadow */
      0 0 28px rgba(255,76,255,0.18),        /* bloom */
      0 0 60px var(--btn-aura);              /* outer aura */
  }

  /* outer bloom pulse */
  .btn::before{
    content:"";
    position:absolute;
    left:-12%;
    top:-30%;
    width:124%;
    height:160%;
    filter:blur(28px);
    background: radial-gradient(circle at 30% 20%, rgba(196,0,255,0.22), rgba(255,76,255,0.08) 30%, rgba(0,238,255,0.02) 70%, transparent 80%);
    z-index:-2;
    opacity:0.9;
    pointer-events:none;
  }

  /* cyan outer rim */
  .btn::after{
    content:"";
    position:absolute;
    left:-10%;
    top:-8%;
    width:120%;
    height:116%;
    border-radius:18px;
    box-shadow: 0 0 40px rgba(0,238,255,0.12);
    z-index:-3;
    pointer-events:none;
  }

  .btn:active{ transform:translateY(1px) scale(.995); }

  .hint{
    margin-top:12px;
    font-size:12px;
    color:rgba(255,255,255,0.46);
  }

  /* Verification overlay inside the panel */
  .verify-wrap {
    position: absolute;
    inset: 0;
    display:flex;
    align-items:center;
    justify-content:center;
    pointer-events:none;
  }

  .badge {
    min-width:220px;
    max-width:90%;
    padding:18px 20px;
    border-radius:14px;
    background: linear-gradient(180deg, rgba(6,6,12,0.9), rgba(8,8,16,0.75));
    border:1px solid rgba(255,255,255,0.06);
    box-shadow: 0 8px 30px rgba(0,0,0,0.6), 0 0 60px rgba(0,0,0,0.25);
    display:flex;
    gap:14px;
    align-items:center;
    justify-content:center;
    transform:translateY(-6px);
    opacity:0;
  }

  .badge.show { animation: badgeIn .42s cubic-bezier(.2,.9,.2,1) forwards; pointer-events:auto; }
  @keyframes badgeIn {
    from { transform:translateY(-14px) scale(.96); opacity:0; }
    to { transform:translateY(0) scale(1); opacity:1; }
  }

  .badge .icon {
    width:54px; height:54px; border-radius:10px; display:flex; align-items:center; justify-content:center;
    font-size:20px; font-weight:800; color:#081020;
  }

  /* success style */
  .badge.success { border:1px solid rgba(255,215,107,0.12); }
  .badge.success .icon { background: linear-gradient(135deg, var(--gold), #ffb86b); box-shadow: 0 6px 28px rgba(255,211,107,0.18), 0 0 18px rgba(79,122,254,0.08); }

  .badge .text { text-align:left; }
  .badge .text .head { font-weight:800; font-size:15px; color:var(--gold); }
  .badge .text .sub { font-size:12px; color:rgba(255,255,255,0.8); margin-top:6px; }

  /* success ring effect */
  .ring {
    position:absolute;
    width:120px;
    height:120px;
    border-radius:999px;
    z-index:1;
    pointer-events:none;
    left:50%;
    transform:translateX(-50%);
    top:calc(50% - 110px);
    opacity:0;
  }
  .ring.show {
    animation: ringPop .72s cubic-bezier(.22,.9,.2,1) forwards;
  }
  @keyframes ringPop {
    0% { transform:translateX(-50%) scale(.28); opacity:0.0; filter:blur(6px); }
    30% { opacity:0.9; transform:translateX(-50%) scale(.9); filter:blur(2px); }
    100% { transform:translateX(-50%) scale(1.3); opacity:0; filter:blur(12px); }
  }

  /* fail badge */
  .badge.fail { border:1px solid rgba(255,59,59,0.12); }
  .badge.fail .icon { background: linear-gradient(135deg, #ff5b5b, #ff3b3b); box-shadow: 0 8px 34px rgba(255,59,59,0.12); color:#fff; }

  /* particle burst container */
  .burst {
    position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); pointer-events:none; z-index:6;
  }
  .particle {
    position:absolute; width:8px; height:8px; border-radius:50%;
    transform:translate(-50%,-50%) scale(.8); opacity:0.0;
  }

  /* subtle success pulse for panel */
  main.panel.success {
    box-shadow: 0 20px 120px rgba(255,209,107,0.06), 0 0 60px rgba(79,122,254,0.06);
  }

</style>
</head>

<body>

<div id="scene">
  <canvas id="candlesCanvas"></canvas>
</div>

<main class="panel" id="mainPanel">
  <h1 class="title">ABROX AI Login</h1>
  <div class="sub">Enter your UID and dashboard password.</div>

  <input id="uidInput" class="field" type="text" placeholder="Enter your UID" />

  <div class="password-wrap">
    <input id="passInput" class="field" type="password" placeholder="Dashboard Password" />
    <span id="togglePassword">üëÅÔ∏è</span>
  </div>

  <button class="btn btn-core" id="loginBtn">LOGIN</button>
  <div class="hint">Secure ‚Ä¢ Encrypted ‚Ä¢ Neon Fintech</div>

  <!-- verify UI (inside panel) -->
  <div class="verify-wrap" aria-hidden="true">
    <div id="ring" class="ring" style="background:radial-gradient(circle, rgba(255,215,107,0.22), rgba(79,122,254,0.12));"></div>

    <div id="badge" class="badge" role="status" aria-hidden="true">
      <div class="icon" id="badgeIcon">‚úì</div>
      <div class="text">
        <div class="head" id="badgeHead">ACCESS VERIFIED</div>
        <div class="sub" id="badgeSub">Identity Matched ‚Ä¢ Redirecting‚Ä¶</div>
      </div>
    </div>

    <div id="burst" class="burst" aria-hidden="true"></div>
  </div>
</main>

<!-- Neon Mixed Glow Candles (unchanged logic, but blended & moving) -->
<script>
(() => {
  const canvas = document.getElementById('candlesCanvas');
  const ctx = canvas.getContext('2d', { alpha: true });

  function resize(){
    const dpr = Math.max(1, Math.min(window.devicePixelRatio || 1, 2));
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener("resize", resize);
  resize();

  const isMobile = /Mobi|Android/i.test(navigator.userAgent);
  let cols=44, rows=12;
  if(isMobile){ cols=20; rows=8; }

  const candles=[];
  const padding=40;
  let areaW = window.innerWidth - padding*2;
  let areaH = window.innerHeight - padding*2;
  const start = performance.now();

  function rebuild(){
    candles.length = 0;
    areaW = window.innerWidth - padding*2;
    areaH = window.innerHeight - padding*2;
    for(let r=0;r<rows;r++){
      for(let c=0;c<cols;c++){
        const phase = Math.random()*Math.PI*2;
        candles.push({
          x: padding + (c+0.5)*(areaW/cols) + (Math.random()-0.5)*6,
          z: padding + (r+0.5)*(areaH/rows) + (Math.random()-0.5)*6,
          baseHeight: (areaH * (0.16 + Math.random()*0.44))*(1 - r/(rows*1.15)),
          width: Math.max(2.2,(areaW/cols)*(0.16+Math.random()*0.28)),
          seed: Math.random()*1000,
          phase,
          speed: 0.4 + Math.random()*1.2,
          hueShift: Math.random()
        });
      }
    }
  }

  rebuild();
  window.addEventListener('resize', rebuild);

  let pointerX=0,pointerY=0;
  window.addEventListener("mousemove",e=>{
    pointerX = (e.clientX / window.innerWidth)*2-1;
    pointerY = (e.clientY / window.innerHeight)*2-1;
  });

  function fastNoise(t){
    return Math.sin(t)*0.5 + Math.sin(t*1.7)*0.25 + Math.sin(t*2.9)*0.15;
  }

  function draw(){
    const t = (performance.now() - start)*0.001;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // base vignette
    const vg = ctx.createLinearGradient(0,0,0,canvas.height);
    vg.addColorStop(0, 'rgba(2,6,20,0.14)');
    vg.addColorStop(1, 'rgba(0,0,0,0.56)');
    ctx.fillStyle = vg;
    ctx.fillRect(0,0,canvas.width,canvas.height);

    const parX = pointerX * 18;
    const parY = pointerY * 10;

    // draw candles back-to-front
    for (let r = rows - 1; r >= 0; r--) {
      for (let c = 0; c < cols; c++) {
        const idx = r * cols + c;
        const cd = candles[idx];

        // moving transit: make hue shift over time and vertical oscillation
        const flick = (Math.sin(t*cd.speed + cd.seed) * 0.5 + fastNoise(t*0.9 + cd.seed*0.7)*0.3) * 0.9;
        const move = Math.sin(t*0.6 + cd.phase) * (6 + cd.hueShift*8);

        const h = Math.max(8, cd.baseHeight + flick * 28 + move);
        const glow = 0.6 + Math.max(0, flick) * 1.6;

        const x = cd.x + parX * ((c/cols)-0.5) * 0.6 + Math.sin(t*0.12 + cd.seed*0.21) * 2.2;
        const y = cd.z + parY * ((r/rows)-0.5) * 0.45 + Math.cos(t*0.08 + cd.phase*0.9) * 3;

        ctx.save();
        ctx.translate(x, y);

        // gradient mixes cyan -> purple with a subtle gold shift for premium feel
        const outer = Math.max(22, h * 0.6) * (0.9 + r/rows*0.4);
        const grad = ctx.createRadialGradient(0, -h/2, 0, 0, -h/2, outer);
        // mix positions by hueShift to create variety/transit
        const mix = cd.hueShift;
        const c1 = `rgba(0,238,255,${0.06 * glow})`;
        const c2 = `rgba(196,0,255,${0.05 * glow})`;
        const c3 = `rgba(255,211,107,${0.02 * glow})`;
        grad.addColorStop(0, c1);
        grad.addColorStop(0.25, (mix>0.66)?c2: (mix>0.33)?c1:c3 );
        grad.addColorStop(1, 'rgba(0,0,0,0)');

        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = grad;
        ctx.fillRect(-outer, -h - outer, outer*2, outer*2);

        // candle body
        ctx.globalCompositeOperation = 'source-over';
        const bodyW = cd.width * (0.9 + (r/rows)*0.24);
        const bodyX = -bodyW/2;
        const bodyY = -h;

        // body gradient
        const bodyGrad = ctx.createLinearGradient(0, bodyY, 0, bodyY + h);
        bodyGrad.addColorStop(0, 'rgba(8,16,28,0.96)');
        bodyGrad.addColorStop(0.6, 'rgba(18,30,48,0.78)');
        bodyGrad.addColorStop(1, 'rgba(6,8,14,0.44)');
        ctx.fillStyle = bodyGrad;
        ctx.fillRect(bodyX, bodyY, bodyW, h);

        // luminous cap with mixed colors
        const capH = Math.max(4, Math.min(18, h * 0.06 + Math.abs(flick)*6));
        const capW = bodyW * (1.1 + Math.sin(t*4 + cd.seed)*0.03);
        const capGrad = ctx.createLinearGradient(0, -h - capH, 0, -h);
        // vary stops using hueShift
        if (cd.hueShift < 0.33) {
          capGrad.addColorStop(0, `rgba(0,238,255,${0.85*glow})`);
          capGrad.addColorStop(0.6, `rgba(196,0,255,${0.26*glow})`);
        } else if (cd.hueShift < 0.66) {
          capGrad.addColorStop(0, `rgba(196,0,255,${0.9*glow})`);
          capGrad.addColorStop(0.6, `rgba(255,211,107,${0.24*glow})`);
        } else {
          capGrad.addColorStop(0, `rgba(255,211,107,${0.9*glow})`);
          capGrad.addColorStop(0.6, `rgba(0,238,255,${0.24*glow})`);
        }
        capGrad.addColorStop(1, `rgba(120,180,255,0.02)`);

        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = capGrad;
        ctx.fillRect(-capW/2, -h - capH, capW, capH);

        // tiny spark
        if (Math.random() < 0.006 + Math.abs(flick)*0.02) {
          ctx.beginPath();
          ctx.fillStyle = `rgba(255,255,255,${0.45 * glow})`;
          ctx.arc((Math.random()-0.5)*capW*0.35, -h - capH*0.5, 1 + Math.random()*1.6, 0, Math.PI*2);
          ctx.fill();
        }

        ctx.restore();
      }
    }

    // subtle grain/noise overlay
    ctx.save();
    ctx.globalAlpha = 0.035;
    for (let i = 0; i < 48; i++) {
      ctx.fillStyle = `rgba(255,255,255,${Math.random()*0.02})`;
      ctx.fillRect(Math.random()*canvas.width, Math.random()*canvas.height, 1, 1);
    }
    ctx.restore();

    requestAnimationFrame(draw);
  }
  draw();
})();
</script>

<!-- Verification + UI behavior -->
<script>
const loginBtn = document.getElementById('loginBtn');
const mainPanel = document.getElementById('mainPanel');
const badge = document.getElementById('badge');
const badgeIcon = document.getElementById('badgeIcon');
const badgeHead = document.getElementById('badgeHead');
const badgeSub = document.getElementById('badgeSub');
const ring = document.getElementById('ring');
const burst = document.getElementById('burst');

function clearVerifyUI(){
  badge.className = 'badge';
  badgeIcon.textContent = '';
  badgeHead.textContent = '';
  badgeSub.textContent = '';
  ring.classList.remove('show');
  badge.classList.remove('show','success','fail');
  mainPanel.classList.remove('success','shake');
  burst.innerHTML = '';
}

/* small particle burst generator */
function spawnParticles(color, count = 18){
  burst.innerHTML = '';
  for(let i=0;i<count;i++){
    const p = document.createElement('div');
    p.className = 'particle';
    p.style.background = color;
    p.style.left = '50%';
    p.style.top = '50%';
    burst.appendChild(p);

    // animate particle
    const angle = (Math.random()*Math.PI*2);
    const dist = 40 + Math.random()*72;
    const dur = 600 + Math.random()*420;
    p.animate([
      { transform: `translate(-50%,-50%) scale(.6) translate(0,0)`, opacity: 1 },
      { transform: `translate(-50%,-50%) scale(1.0) translate(${Math.cos(angle)*dist}px, ${Math.sin(angle)*dist}px)`, opacity: 0 }
    ], { duration: dur, easing: 'cubic-bezier(.2,.9,.2,1)'});
    // remove after animation
    setTimeout(()=> p.remove(), dur + 80);
  }
}

/* show success UI */
function showSuccess(msgHead = 'ACCESS VERIFIED', msgSub = 'Identity Matched ‚Ä¢ Redirecting‚Ä¶'){
  clearVerifyUI();
  badge.classList.add('show','success');
  badgeIcon.textContent = '‚úì';
  badgeHead.textContent = msgHead;
  badgeSub.textContent = msgSub;

  // success ring and burst
  ring.style.background = 'radial-gradient(circle, rgba(255,215,107,0.22), rgba(79,122,254,0.12))';
  ring.classList.add('show');
  mainPanel.classList.add('success');

  // particles: mix gold & cyan
  spawnParticles('rgba(255,215,107,0.95)', 10);
  spawnParticles('rgba(0,238,255,0.95)', 10);

  // reveal badge
  setTimeout(()=> badge.classList.add('show'), 80);
}

/* show fail UI */
function showFail(msgHead = 'ACCESS DENIED', msgSub = 'Credentials Incorrect'){
  clearVerifyUI();
  badge.classList.add('show','fail');
  badgeIcon.textContent = '‚úï';
  badgeHead.textContent = msgHead;
  badgeSub.textContent = msgSub;

  // red flash ring
  ring.style.background = 'radial-gradient(circle, rgba(255,59,59,0.22), rgba(255,59,59,0.08))';
  ring.classList.add('show');

  // red particles
  spawnParticles('rgba(255,59,59,0.95)', 18);

  // shake panel
  mainPanel.classList.add('shake');

  // reveal badge
  setTimeout(()=> badge.classList.add('show'), 40);
}

/* small helper used previously */
function showAlertFallback(m){
  // fallback if something odd: show small badge temporarily
  showFail('ERROR', m || 'Request failed');
  setTimeout(clearVerifyUI, 1600);
}

/* Verify function (keeps your original logic but uses animations) */
async function verify(){
  const uid = uidInput.value.trim();
  const pass = passInput.value.trim();
  if(!uid || !pass){
    showFail('MISSING', 'Enter UID & Password');
    setTimeout(clearVerifyUI, 1400);
    return;
  }

  try {
    // load subscribers
    const s = await fetch("https://raw.githubusercontent.com/AbroxAI/abrox-web/main/subscribers.json",{cache:"no-store"});
    if(!s.ok) return showFail('NETWORK', 'Failed to load subscribers');

    const subs = await s.json();
    if(!subs[uid]){
      showFail('ACCESS DENIED', 'UID not found');
      setTimeout(clearVerifyUI, 1400);
      return;
    }

    const e = await fetch("https://raw.githubusercontent.com/AbroxAI/abrox-web/main/.env",{cache:"no-store"});
    if(!e.ok) return showFail('NETWORK', 'Failed to load config');

    const envText = await e.text();
    const m = envText.match(/DASHBOARD_PASSWORD=(.*)/);
    if(!m) return showFail('CONFIG', 'Password config missing');

    const correct = m[1].trim();
    if(pass !== correct){
      showFail('ACCESS DENIED', 'Incorrect password');
      setTimeout(clearVerifyUI, 1400);
      return;
    }

    // success
    showSuccess();
    // after short delay redirect to same target you used
    setTimeout(()=> {
      window.location.href = "dashboard.html?uid=" + encodeURIComponent(uid);
    }, 1100);

  } catch(err){
    console.error(err);
    showFail('ERROR', 'Connection error');
    setTimeout(clearVerifyUI, 1600);
  }
}

/* attach button and toggle password */
document.getElementById("loginBtn").addEventListener("click", (e)=>{ e.preventDefault(); verify(); });
document.getElementById("togglePassword").addEventListener("click", function () {
  const pass = document.getElementById('passInput');
  if(pass.type === "password"){
    pass.type = "text";
    this.textContent = "üôà";
  } else {
    pass.type = "password";
    this.textContent = "üëÅÔ∏è";
  }
});
</script>

</body>
</html>
