<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>ABROX AI ‚Äî Login</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  :root{
    /* NEW FINTECH NEON THEME */
    --bg1:#02041b;
    --bg2:#03031a;
    --panel-bg: rgba(10,12,28,0.45);
    --glass-edge: rgba(255,255,255,0.08);
    --muted: rgba(255,255,255,0.75);
    --cyan:#00eaff;
    --purple:#c400ff;
  }

  html,body{
    height:100%;
    margin:0;
    background:linear-gradient(160deg,var(--bg1),var(--bg2));
    font-family:"Poppins",system-ui;
    color:#fff;
    overflow:hidden;
  }

  #scene { position:fixed; inset:0; z-index:0; }
  canvas { width:100%; height:100%; display:block; }

  main.panel {
    position:absolute;
    left:50%; top:50%;
    transform:translate(-50%,-50%);
    z-index:10;
    width:100%;
    max-width:520px;
    padding:34px;
    border-radius:22px;
    background:var(--panel-bg);
    border:1px solid var(--glass-edge);
    backdrop-filter: blur(14px) saturate(1.25);
    text-align:center;
    box-shadow:0 12px 70px rgba(0,0,0,0.55);
  }

  .title{
    font-size:30px;
    font-weight:800;
    margin-bottom:8px;
    color:var(--cyan);
    text-shadow:0 0 16px rgba(0,238,255,0.55);
  }

  .sub{
    font-size:13px;
    color:var(--muted);
    margin-bottom:20px;
  }

  .field{
    width:100%;
    padding:14px 16px;
    border-radius:12px;
    border:1px solid rgba(255,255,255,0.1);
    background:rgba(12,14,26,0.55);
    margin-top:12px;
    color:#dffaff;
    font-size:15px;
    outline:none;
    backdrop-filter:blur(8px);
  }

  /* Password wrapper (for eye icon) */
  .password-wrap{
    position:relative;
    width:100%;
  }

  #togglePassword{
    position:absolute;
    right:14px;
    top:50%;
    transform:translateY(-50%);
    cursor:pointer;
    color:#aaa;
    font-size:15px;
    user-select:none;
  }

  .btn{
    width:100%;
    margin-top:22px;
    padding:13px;
    border-radius:14px;
    border:none;
    font-weight:800;
    font-size:16px;
    cursor:pointer;
    background:var(--purple);
    color:#fff;
    text-shadow:0 0 8px rgba(255,255,255,0.4);
    box-shadow:
      0 0 12px rgba(196,0,255,0.6),
      0 0 32px rgba(196,0,255,0.45);
  }

  .btn:active{
    transform:scale(0.97);
  }

  .hint{
    margin-top:12px;
    font-size:12px;
    color:rgba(255,255,255,0.46);
  }
</style>
</head>

<body>

<div id="scene">
  <canvas id="candlesCanvas"></canvas>
</div>

<main class="panel">
  <h1 class="title">ABROX AI Login</h1>
  <div class="sub">Enter your UID and dashboard password.</div>

  <input id="uidInput" class="field" type="text" placeholder="Enter your UID" />

  <div class="password-wrap">
    <input id="passInput" class="field" type="password" placeholder="Dashboard Password" />
    <span id="togglePassword">üëÅÔ∏è</span>
  </div>

  <button class="btn" id="loginBtn">LOGIN</button>
  <div class="hint">Secure ‚Ä¢ Encrypted ‚Ä¢ Neon Fintech</div>
</main>

<!-- Neon Mixed Glow Candles -->
<script>
(() => {
  const canvas = document.getElementById('candlesCanvas');
  const ctx = canvas.getContext('2d', { alpha: true });

  function resize(){
    const dpr = Math.max(1, Math.min(window.devicePixelRatio || 1, 2));
    canvas.width = window.innerWidth * dpr;
    canvas.height = window.innerHeight * dpr;
    canvas.style.width = window.innerWidth + "px";
    canvas.style.height = window.innerHeight + "px";
    ctx.setTransform(dpr,0,0,dpr,0,0);
  }
  window.addEventListener("resize", resize);
  resize();

  const isMobile = /Mobi|Android/i.test(navigator.userAgent);
  let cols=44, rows=12;
  if(isMobile){ cols=20; rows=8; }

  const candles=[];
  const padding=40;
  const areaW=window.innerWidth - padding*2;
  const areaH=window.innerHeight - padding*2;
  const start = performance.now();

  for(let r=0;r<rows;r++){
    for(let c=0;c<cols;c++){
      candles.push({
        x: padding + (c+0.5)*(areaW/cols),
        z: padding + (r+0.5)*(areaH/rows),
        baseHeight: (areaH * (0.18 + Math.random()*0.42))*(1 - r/(rows*1.15)),
        width: Math.max(2.2,(areaW/cols)*(0.18+Math.random()*0.22)),
        seed: Math.random()*1000,
        flickOff: Math.random()*0.6
      });
    }
  }

  let pointerX=0,pointerY=0;
  window.addEventListener("mousemove",e=>{
    pointerX = (e.clientX / window.innerWidth)*2-1;
    pointerY = (e.clientY / window.innerHeight)*2-1;
  });

  function fastNoise(t){
    return Math.sin(t)*0.5 + Math.sin(t*1.7)*0.25 + Math.sin(t*2.9)*0.15;
  }

  function draw(){
    const t = (performance.now() - start)*0.001;
    ctx.clearRect(0,0,canvas.width,canvas.height);

    const parX = pointerX * 18;
    const parY = pointerY * 12;

    for(let r=rows-1;r>=0;r--){
      for(let c=0;c<cols;c++){
        const cd = candles[r*cols+c];
        const flick = (Math.sin(t*2 + cd.seed)*0.45 + fastNoise(t*1.4 + cd.seed)*0.35)
                       * (0.6 + cd.flickOff*0.8);

        const h = cd.baseHeight + flick*22;
        const x = cd.x + parX*((c/cols)-0.5)*0.7;
        const y = cd.z + parY*((r/rows)-0.5)*0.6;

        ctx.save();
        ctx.globalAlpha = 0.10;

        const gradient = ctx.createLinearGradient(x, y-h, x, y);
        gradient.addColorStop(0, "rgba(0,238,255,0.85)");
        gradient.addColorStop(1, "rgba(196,0,255,0.85)");

        ctx.fillStyle = gradient;
        ctx.fillRect(x - cd.width/2, y - h, cd.width, h);

        ctx.restore();
      }
    }
    requestAnimationFrame(draw);
  }
  draw();
})();
</script>

<!-- Verification Logic -->
<script>
function showAlert(m){ alert(m); }

async function verify(){
  const uid = uidInput.value.trim();
  const pass = passInput.value.trim();
  if(!uid || !pass) return showAlert("Enter UID and Password");

  try {
    const s = await fetch("https://raw.githubusercontent.com/AbroxAI/abrox-web/main/subscribers.json",{cache:"no-store"});
    if(!s.ok) return showAlert("Failed to load subscribers.");
    const subs = await s.json();

    if(!subs[uid]) return showAlert("UID not found.");

    const e = await fetch("https://raw.githubusercontent.com/AbroxAI/abrox-web/main/.env",{cache:"no-store"});
    if(!e.ok) return showAlert("Failed to load config.");
    const envText = await e.text();

    const m = envText.match(/DASHBOARD_PASSWORD=(.*)/);
    if(!m) return showAlert("Password config missing.");

    if(pass !== m[1].trim()) return showAlert("Incorrect password.");

    window.location.href = "dashboard.html?uid=" + encodeURIComponent(uid);
  } catch(err){
    showAlert("Connection error.");
  }
}

document.getElementById("loginBtn").addEventListener("click", verify);

/* Show/Hide password */
document.getElementById("togglePassword").addEventListener("click", function () {
  const pass = document.getElementById('passInput');
  if(pass.type === "password"){
    pass.type = "text";
    this.textContent = "üôà";
  } else {
    pass.type = "password";
    this.textContent = "üëÅÔ∏è";
  }
});
</script>

</body>
</html>
